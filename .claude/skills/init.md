---
name: init
description: Initialize session context for multi-cloud, multi-framework compliance engagements
---

## Overview

The `/init` command configures the session context for your compliance engagement. This sets the cloud provider, compliance framework, and baseline level that all other agents will reference.

## Instructions

When the user runs `/init`, guide them through configuration:

### Step 1: Gather Configuration

Ask the user to specify their engagement parameters. Use the AskUserQuestion tool with these questions:

1. **Cloud Provider:**
   - AWS (Amazon Web Services)
   - Azure (Microsoft Azure)
   - GCP (Google Cloud Platform)

2. **Compliance Framework:**
   - FedRAMP (Federal Risk and Authorization Management Program)
   - GovRAMP (State/Local Government Risk and Authorization Management Program)
   - CMMC (Cybersecurity Maturity Model Certification)

3. **Baseline/Level:**
   - For FedRAMP/GovRAMP: Low, Moderate, or High
   - For CMMC: Level 1, Level 2, or Level 3

4. **Project Name:** (optional)
   - A short identifier for this engagement

### Step 2: Load Framework and Cloud Data

After gathering user input, read the relevant data files:

1. Read `/.claude/data/frameworks/{framework}.yaml` for framework-specific information
2. Read `/.claude/data/clouds/{cloud}.yaml` for cloud-specific patterns

### Step 3: Write Session Context

Create or overwrite `/.claude/session-context.md` with the engagement configuration.

Use this format:

```markdown
# Session Context

> Auto-generated by `/init` - Do not edit manually

## Engagement Configuration

| Parameter | Value |
|-----------|-------|
| **Cloud Provider** | {cloud_name} |
| **Compliance Framework** | {framework_name} |
| **Baseline Level** | {level} |
| **Control/Practice Count** | {count} |
| **Project Name** | {project_name or "Not specified"} |

## Framework Summary

### {framework_name} {level}

{framework_description}

**Assessment Type:** {assessment_type}

### Authorization/Certification Phases

{phases_list}

### Priority Control Families/Domains

{priority_controls_table}

## Cloud Provider Summary

### {cloud_name}

**Terraform Provider:** {provider_prefix}
**Region Variable:** {region_variable}
**Identity Type:** {identity_type}

### Key Services

| Capability | Service | Resource |
|------------|---------|----------|
| Logging | {logging_service} | {logging_resource} |
| Secrets | {secrets_service} | {secrets_resource} |
| Network Isolation | {network_service} | {network_resource} |
| Security Monitoring | {security_service} | {security_resource} |

### Required Tags/Labels

{tags_template}

## Quick Reference

### Compliance Checklist

For every Terraform module, verify:

- [ ] Encryption in transit (TLS 1.2+)
- [ ] Encryption at rest (with key management)
- [ ] Audit logging enabled
- [ ] Network isolation (private endpoints/VPC endpoints)
- [ ] Least privilege access (RBAC/IAM)
- [ ] Compliance tags/labels applied
- [ ] Diagnostic/monitoring settings configured

### File Patterns

When creating new modules, use:

- Provider prefix: `{provider_prefix}_`
- Naming: `${var.project_name}-${var.environment}-{suffix}`
- Required files: `main.tf`, `variables.tf`, `outputs.tf`

---

*Session initialized on {timestamp}*
```

### Step 4: Confirm Configuration

After writing the session context, display a confirmation summary to the user:

```markdown
## Session Initialized

| Configuration | Value |
|--------------|-------|
| Cloud | {cloud} |
| Framework | {framework} {level} |
| Controls/Practices | {count} |

**Session context written to:** `/.claude/session-context.md`

All agents (`/compliance`, `/architect`, `/security`, `/cicd`, `/pm`, `/docs`) will now reference this context.

### Available Commands

| Command | Purpose |
|---------|---------|
| `/pm` | Project management, SOW analysis |
| `/compliance` | Control mapping, gap analysis |
| `/architect` | Terraform module design |
| `/security` | Security review |
| `/docs` | Documentation, SSP maintenance |
| `/cicd` | Pipeline configuration |
| `/new-module` | Create new compliant module |
| `/review-pr` | Multi-agent PR review |

Run any command to begin working with your {framework} {level} / {cloud} configuration.
```

## Example Interaction

**User:** `/init`

**Agent:**
```
I'll help you configure this session for your compliance engagement.
```

*Uses AskUserQuestion with cloud, framework, and level options*

**User selects:** AWS, FedRAMP, Moderate

**Agent:**
```
Setting up session for FedRAMP Moderate on AWS...

Reading framework data from /.claude/data/frameworks/fedramp.yaml
Reading cloud data from /.claude/data/clouds/aws.yaml

## Session Initialized

| Configuration | Value |
|--------------|-------|
| Cloud | AWS |
| Framework | FedRAMP Moderate |
| Controls | 325 |

Session context written to: /.claude/session-context.md

All agents will now provide guidance specific to FedRAMP Moderate compliance on AWS infrastructure.

Ready to begin. What would you like to work on?
```

## Error Handling

If data files are missing:
- Inform the user which file is missing
- Provide instructions to ensure the data files exist
- Suggest running with default/fallback values if appropriate

If session-context.md cannot be written:
- Display the context information directly
- Instruct the user to create the file manually if needed

## Re-initialization

If `/init` is run when a session context already exists:
- Show the current configuration
- Ask if the user wants to reconfigure
- If yes, proceed with new configuration
- If no, keep existing configuration
